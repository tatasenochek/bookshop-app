import{u as v,j as s,I as x,B as N,R as S}from"./index-KX7zggbE.js";import{toast as n}from"./toastify-A_MKaA2v.js";import{u as I,s as k,S as q}from"./types-Ci03CboM.js";import{e as O,u as P,L as E}from"./react-CXAtwWnn.js";import"./supabase-zNuR1CAo.js";import"./ui-Dr2rXh7g.js";import"./redux-CV9yM8-D.js";const L="_signin_e7uqw_4",M="_action_e7uqw_18",e={signin:L,"signin-form":"_signin-form_e7uqw_11",action:M};function H(){var m,l,c,u;const j=O(),i=P(),[_]=v(),{register:r,handleSubmit:b,formState:{errors:a,isValid:o,isSubmitting:t}}=I({resolver:k(q),mode:"all",reValidateMode:"onChange"});async function w(y){var d,g,p;if(!t)try{await _(y).unwrap(),n.success("Вы успешно авторизованы"),j(((g=(d=i.state)==null?void 0:d.backgroundPath)==null?void 0:g.pathname)||S.HOME,{state:{modalOpen:(p=i.state)==null?void 0:p.modalOpen}})}catch(h){const f=h;f.status===401||f.status===400?n.error("Неверный email или пароль"):n.error("Ошибка авторизации пользователя"),console.error("Ошибка при регистрации пользователя",h)}}return s.jsxs("div",{className:e.signin,children:[s.jsx("h2",{children:"Войти"}),s.jsxs("form",{onSubmit:b(w),className:e["signin-form"],children:[s.jsx(x,{label:"Электронная почта",...r("email"),error:((m=a.email)==null?void 0:m.type)==="required"?"Обязательное поле":((l=a.email)==null?void 0:l.type)==="invalid_string"?"Некорректный формат email":(c=a.email)==null?void 0:c.message}),s.jsx(x,{type:"password",label:"Пароль",...r("password"),error:(u=a.password)==null?void 0:u.message}),s.jsx(N,{isPrimary:!0,disabled:!o||t,title:o?void 0:"Заполните все поля правильно",children:t?"Вход...":"Войти"})]}),s.jsxs("div",{className:e.action,children:[s.jsx("span",{className:e.text,children:"Нет аккаунта?"}),s.jsx(E,{className:e.link,state:{backgroundPath:i},to:`${S.SIGNUP}`,children:"Зарегистрироваться"})]})]})}export{H as default};
