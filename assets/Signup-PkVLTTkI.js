import{a as _,j as s,I as n,B as b,R as g}from"./index-KX7zggbE.js";import{toast as o}from"./toastify-A_MKaA2v.js";import{u as y,s as N,a as v}from"./types-Ci03CboM.js";import{e as w,L as I}from"./react-CXAtwWnn.js";import"./supabase-zNuR1CAo.js";import"./ui-Dr2rXh7g.js";import"./redux-CV9yM8-D.js";const E="_signup_t32un_4",M="_action_t32un_18",r={signup:E,"signup-form":"_signup-form_t32un_11",action:M};function C(){var l,u,c,p,d;const f=w(),[x]=_(),{register:a,handleSubmit:h,formState:{errors:e,isValid:m,isSubmitting:i}}=y({resolver:N(v),mode:"all",reValidateMode:"onChange"});async function j(S){if(!i)try{await x(S).unwrap()&&(o.success("Пользователь успешно зарегистрирован"),f(g.HOME))}catch(t){t.status===422?o.error("Пользователь с таким email уже существует"):o.error("Ошибка при регистрации"),console.error("Ошибка при регистрации",t)}}return s.jsxs("div",{className:r.signup,children:[s.jsx("h2",{children:"Регистрация"}),s.jsxs("form",{onSubmit:h(j),className:r["signup-form"],children:[s.jsx(n,{label:"Имя",...a("name"),error:(l=e.name)==null?void 0:l.message}),s.jsx(n,{label:"Электронная почта",...a("email"),error:((u=e.email)==null?void 0:u.type)==="required"?"Обязательное поле":((c=e.email)==null?void 0:c.type)==="invalid_string"?"Некорректный формат email":(p=e.email)==null?void 0:p.message}),s.jsx(n,{type:"password",label:"Пароль",...a("password"),error:(d=e.password)==null?void 0:d.message}),s.jsx(b,{isPrimary:!0,disabled:!m||i,title:m?void 0:"Заполните все поля правильно",children:i?"Регистрация...":"Отправить"})]}),s.jsxs("div",{className:r.action,children:[s.jsx("span",{className:r.text,children:"Есть акканут?"}),s.jsx(I,{className:r.link,to:`${g.SIGNIN}`,children:"Войти"})]})]})}export{C as default};
