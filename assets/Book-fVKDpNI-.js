import{s as b,b as g,j as s,L as B,B as t,g as N,r as v,R as l}from"./index-KX7zggbE.js";import{B as y}from"./redux-CV9yM8-D.js";import{toast as u}from"./toastify-A_MKaA2v.js";import{b as E}from"./bookMutations-ClcgoyPW.js";import{j as O,e as D}from"./react-CXAtwWnn.js";import{T as S}from"./ui-Dr2rXh7g.js";import"./supabase-zNuR1CAo.js";const w="_book_1t3us_4",C="_author_1t3us_9",I="_info_1t3us_13",e={book:w,"book-info":"_book-info_1t3us_9",author:C,info:I,"book-action":"_book-action_1t3us_19","book-error":"_book-error_1t3us_25"};function G(){var a,c;const{id:n}=O(),i=D(),d=y(b),{data:r,isLoading:h,isError:f,refetch:m}=g(n||"",{skip:!n}),[j]=E(),x=d===(r==null?void 0:r.user_id);async function _(){if(!(!confirm("Вы действительно хотите удалить книгу?")||!n))try{await j(n).unwrap(),u.success("Книга успешно удалена!"),i(l.HOME)}catch(k){u.error("Не удалось удалить книгу"),console.error("Ошибка при удалении книги:",k)}}function p(){confirm("Вы хотите редактировать книгу?")&&i(l.ADD_BOOK,{state:{book:r}})}return h?s.jsx(B,{}):f?s.jsxs("div",{className:e["book-error"],children:[s.jsx("p",{children:"Не удалось загрузить книги"}),s.jsx(t,{isPrimary:!0,onClick:m,children:"Попробовать снова"})]}):s.jsx("article",{className:e.book,children:s.jsxs("div",{className:e["book-info"],children:[s.jsx("h2",{children:r==null?void 0:r.book_name}),s.jsx("p",{className:e.author,children:r==null?void 0:r.book_author}),s.jsxs("p",{className:e.info,children:[s.jsx("b",{children:"Жанр:"})," ",s.jsx("span",{children:r&&((a=N.find(o=>o.value===r.genre))==null?void 0:a.genre)})]}),s.jsxs("p",{className:e.info,children:[s.jsx("b",{children:"Описание или мнение о книге:"})," ",s.jsx("span",{children:r==null?void 0:r.description})]}),s.jsxs("p",{className:e.info,children:[s.jsx("b",{children:"Рейтинг:"})," ",s.jsx("span",{children:r&&((c=v.find(o=>o.value===r.rating))==null?void 0:c.rating)})]}),x&&s.jsxs("div",{className:e["book-action"],children:[s.jsx(t,{isPrimary:!0,onClick:p,children:"Редактировать"}),s.jsx(t,{title:"Удалить книгу",isSecond:!0,isSvg:!0,onClick:_,children:s.jsx(S,{})})]})]})})}export{G as default};
